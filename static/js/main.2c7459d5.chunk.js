(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e){e.exports={client_id:"943908581198-7al7j05rfdhqdgqireeu0bqpqlilb4ls.apps.googleusercontent.com",project_id:"kaios-task-app",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_secret:"kchV_SIsL-DanEnnb_0scDbx",redirect_uris:["https://localhost:3000","http://localhost:3000"],javascript_origins:["https://localhost:3000","http://localhost:3000"]}},2:function(e,t,n){e.exports={defaultFocusColor:"var(--color-purple)",headerPurple:"var(--header-purple-background)",headerPink:"var(--header-pink-background)",headerLime:"var(--header-lime-background)",headerCyan:"var(--header-cyan-background)",headerBlue:"var(--header-blue-background)",headerOrange:"var(--header-orange-background)",headerRed:"var(--header-red-background)",darkBlue:"var(--color-darkblue)",turquoise:"var(--color-turquoise)",darkOrange:"var(--color-darkorange)",orange:"var(--color-orange)",yellow:"var(--color-yellow)",violet:"var(--color-violet)",carrotOrange:"var(--color-carrotorange)",watTheBlue:"var(--color-wathetblue)",gold:"var(--color-gold)",purple:"var(--color-purple)",pink:"var(--color-pink)",lime:"var(--color-lime)",cyan:"var(--color-cyan)",red:"var(--color-red)",warning:"var(--color-warning)",destructive:"var(--color-destructive)",preferred:"var(--color-preferred)",black:"var(--color-gs100)",grayscale90:"var(--color-gs90)",grayscale70:"var(--color-gs70)",grayscale45:"var(--color-gs45)",grayscale20:"var(--color-gs20)",grayscale10:"var(--color-gs10)",white:"var(--color-gs00)"}},24:function(e,t,n){e.exports=n(63)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),i=n(5),l=n(3),s=n.n(l),u=n(4),f=n(1),d=n(17),h=(n(31),n(2)),k=n.n(h),b=n(8),m=n(9),v=n(21),g=n(18),p=n(22),C=(n(32),function(e){var t,n=e.handleClick,a=e.icon,c=e.text,o=e.id;return a&&(t=r.a.isValidElement(a)?a:-1===a.toString().indexOf("kai-")?r.a.createElement("img",{src:a,width:20,height:20}):r.a.createElement("span",{className:a})),r.a.createElement("button",{id:o,className:"".concat("kai-softkey","-btn"),onClick:function(e){e.preventDefault(),n&&n()},onFocus:function(e){e.preventDefault(),e.relatedTarget?e.relatedTarget.focus():e.currentTarget.blur()},"data-icon":t?"true":void 0},t,c)}),x=r.a.memo(function(e){var t=e.leftCallback,n=e.rightCallback,c=e.centerCallback,o=e.leftText,i=e.rightText,l=e.centerText,s=e.leftIcon,u=e.centerIcon,f=e.rightIcon,d=Object(a.useCallback)(function(e){switch(e.key){case"SoftLeft":t&&t();break;case"SoftRight":n&&n();break;case"Enter":c&&c()}},[t,n,c]);return Object(a.useEffect)(function(){return document.addEventListener("keydown",d),function(){return document.removeEventListener("keydown",d)}},[d]),r.a.createElement("div",{className:"".concat("kai-softkey"," visible")},r.a.createElement(C,{id:"leftSoftKey",pos:"left",text:o,icon:s,handleClick:t}),r.a.createElement(C,{id:"centerSoftKey",pos:"center",text:l,icon:u,handleClick:c}),r.a.createElement(C,{id:"rightSoftKey",pos:"right",text:i,icon:f,handleClick:n}))}),w=r.a.createContext(void 0),y=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(v.a)(this,Object(g.a)(t).call(this,e))).setLeftCallback=function(e){n.setState({leftCallback:e})},n.setRightCallback=function(e){n.setState({rightCallback:e})},n.setCenterCallback=function(e){n.setState({centerCallback:e})},n.setLeftText=function(e){n.setState({leftText:e,leftIcon:null})},n.setRightText=function(e){n.setState({rightText:e,rightIcon:null})},n.setCenterText=function(e){n.setState({centerText:e,centerIcon:null})},n.setCenterIcon=function(e){n.setState({centerIcon:e,centerText:null})},n.setLeftIcon=function(e){n.setState({leftIcon:e,leftText:null})},n.setRightIcon=function(e){n.setState({rightIcon:e,rightText:null})},n.setSoftKeyTexts=function(e){var t=e.leftText,a=void 0===t?"":t,r=e.centerText,c=void 0===r?"":r,o=e.rightText,i=void 0===o?"":o;n.setState({leftText:a,centerText:c,rightText:i})},n.setSoftKeyCallbacks=function(e){var t=e.leftCallback,a=void 0===t?function(){}:t,r=e.centerCallback,c=void 0===r?function(){}:r,o=e.rightCallback,i=void 0===o?function(){}:o;n.setState({leftCallback:a,centerCallback:c,rightCallback:i})},n.unregisterSoftKeys=function(){n.setState({leftCallback:function(){},centerCallback:function(){},rightCallback:function(){},leftText:null,rightText:null,centerText:null,centerIcon:null})},n.state={leftText:"",centerText:"",rightText:"",centerIcon:null,leftIcon:null,rightIcon:null,leftCallback:function(){},centerCallback:function(){},rightCallback:function(){}},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e={setLeftCallback:this.setLeftCallback,setRightCallback:this.setRightCallback,setCenterCallback:this.setCenterCallback,setLeftText:this.setLeftText,setRightText:this.setRightText,setCenterText:this.setCenterText,setLeftIcon:this.setLeftIcon,setCenterIcon:this.setCenterIcon,setRightIcon:this.setRightIcon,setSoftKeyTexts:this.setSoftKeyTexts,setSoftKeyCallbacks:this.setSoftKeyCallbacks,unregisterSoftKeys:this.unregisterSoftKeys};return r.a.createElement(w.Provider,{value:e},this.props.children,r.a.createElement("footer",{className:this.props.className||""},r.a.createElement(x,{leftText:this.state.leftText,leftIcon:this.state.leftIcon,centerText:this.state.centerText,centerIcon:this.state.centerIcon,rightIcon:this.state.rightIcon,rightText:this.state.rightText,leftCallback:this.state.leftCallback,centerCallback:this.state.centerCallback,rightCallback:this.state.rightCallback})))}}]),t}(r.a.PureComponent),E=function(e){var t=e.children;return r.a.createElement(w.Consumer,null,function(e){return t(e)})},T=(n(33),r.a.memo(function(e){var t=e.id,n=e.primary,c=e.secondary,o=e.initCheckboxVal,i=e.onInputChange,l=e.checkboxSide,s=e.focusColor,u=e.onFocusChange,d=e.index,h=e.forwardedRef,b=e.softKeyManager,m=e.softKeyCheckedText,v=e.softKeyUncheckedText,g=e.softKeyCheckedIcon,p=e.softKeyUncheckedIcon,C=Object(a.useState)(o),x=Object(f.a)(C,2),w=x[0],y=x[1],E=Object(a.useState)(!1),T=Object(f.a)(E,2),O=T[0],j=T[1],I="".concat("kai-cbl","-box"),S="".concat("kai-cbl","-line ").concat("left"===l?"right":"left"),L="".concat("kai-cbl","-primary"),N="".concat("kai-cbl","-secondary ").concat(c?"":"hidden"),R="".concat(I,"-input-").concat(O?"focused":"unfocused");Object(a.useEffect)(function(){var e=w?m:v,t=w?g:p;O&&(null!=t?b.setCenterIcon(t):b.setCenterText(e))},[O,w,b,m,v,g,p]);var K=function(){return y(function(e){return!e})},A=Object(a.useCallback)(function(e){if(j(e),e){var t=w?m:v,n=w?g:p;null!=n?b.setCenterIcon(n):b.setCenterText(t),b.setCenterCallback(K),u(d)}},[d,u,w,m,v,g,p,b]),F=r.a.createElement("div",{className:I},r.a.createElement("input",{id:t,className:R,tabIndex:-1,type:"checkbox",checked:w,onFocus:function(e){e.preventDefault(),e.relatedTarget?e.relatedTarget.focus():e.currentTarget.blur()},onClick:function(e){y(e.target.checked),i&&i(e.target.checked)}}));return r.a.createElement("div",{tabIndex:0,className:"kai-cbl",style:{backgroundColor:O?s||k.a.defaultFocusColor:k.a.white},ref:h,onFocus:function(){return A(!0)},onBlur:function(){return A(!1)}},"left"===l||void 0===l?F:null,r.a.createElement("div",{className:S},r.a.createElement("span",{className:L},n),r.a.createElement("label",{className:N},c)),"right"===l?F:null)})),O=r.a.forwardRef(function(e,t){return r.a.createElement(E,null,function(n){return r.a.createElement(T,Object.assign({softKeyManager:n,forwardedRef:t},e))})}),j=n(10),I=n.n(j),S=(n(34),function(e){var t=e.text,n=e.isDisplayed,a=I()("kai-toast",n&&"".concat("kai-toast","--displayed"));return r.a.createElement("h1",{className:a},t)}),L=!1,N=[],R=r.a.createContext(void 0),K=function(e){var t=e.children,n=Object(a.useState)(""),c=Object(f.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(!1),s=Object(f.a)(l,2),u=s[0],d=s[1];return r.a.createElement(R.Provider,{value:{showToast:function(e,t){N.push({text:e,duration:t}),!L&&function e(){if(0!==N.length){L=!0;var t=N.shift();t&&(i(t.text),d(!0),setTimeout(function(){d(!1),setTimeout(function(){e()},300)},t.duration||5e3))}else L=!1}()}}},r.a.createElement(S,{text:o,isDisplayed:u}),t)},A=R,F=n(23),_=new(function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,[{key:"init",value:function(){return new Promise(function(e,t){return window.gapi.client.load("tasks","v1",function(){return window.gapi.client.load("plus","v1",function(){return e()})})})}},{key:"getAllTaskList",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t,n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listTaskLists();case 2:return t=e.sent,e.next=5,Promise.all(t.items.map(function(){var e=Object(u.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.listTasks(t.id);case 2:return a=e.sent,e.abrupt("return",Object(i.a)({},t,{tasks:Array.isArray(a&&a.items)?a.items:[]}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listTaskLists",value:function(){var e=window.gapi.client.tasks.tasklists.list();return this.makeRequest(e)}},{key:"showTaskList",value:function(e){var t=window.gapi.client.tasks.tasklists.get({tasklist:e});return this.makeRequest(t)}},{key:"listTasks",value:function(e){var t=window.gapi.client.tasks.tasks.list({tasklist:e});return this.makeRequest(t)}},{key:"makeRequest",value:function(e){return new Promise(function(t,n){e.execute(function(e){return e.error?n(e.error):t(e.result)})})}},{key:"updateTask",value:function(e){var t=e.taskListId,n=e.taskId,a=Object(F.a)(e,["taskListId","taskId"]),r=window.gapi.client.tasks.tasks.update(Object(i.a)({tasklist:t,task:n,id:n},a));return this.makeRequest(r)}}]),e}()),q=n(19),D=(n(35),r.a.memo(function(e){var t=[],n=Object(a.useState)(0),c=Object(f.a)(n,2),i=c[0],l=c[1],s=e.children,u=e.onChangeIndex,d=e.isActive,h=e.className,k=function(e){l(e),u&&u(e)},b=Object(a.useCallback)(function(e){if(t[e]){var n=o.a.findDOMNode(t[e].current);n&&n.focus()}},[t]),m=Object(a.useCallback)(function(e){var n=i;if(d)switch(e.key){case"ArrowUp":b(n=n-1>=0?n-1:n);break;case"ArrowDown":n=n+1<t.length?n+1:n,b(n)}},[d,i,b,t]);Object(a.useEffect)(function(){return document.addEventListener("keydown",m),function(){return document.removeEventListener("keydown",m)}},[m]),Object(a.useEffect)(function(){d&&b(i)},[d,b,i]);return r.a.createElement("div",{className:I()("kai-list-view",h||"")},function(){var e=-1;return r.a.Children.map(s,function(n){if(!n||null!=n.props.separatorText)return n;e++;var a=r.a.createRef();return t[e]=a,r.a.cloneElement(n,{index:e,onFocusChange:k,ref:a})})}())})),P=n(20),B=n.n(P),M=(n(59),r.a.memo(function(e){var t=e.onChangeIndex,n=e.children,c=[],o=Object(a.useState)(0),i=Object(f.a)(o,2),l=i[0],s=i[1],u=Object(a.useCallback)(function(e){s(e),c[e].current.scrollIntoView({behavior:"auto",block:"start",inline:"center"}),t(e)},[c,t]),d=Object(a.useCallback)(function(e){var t=l;switch(e.key){case"ArrowRight":t=Math.min(t+1,r.a.Children.count(n)-1),l!==t&&u(t);break;case"ArrowLeft":t=Math.max(t-1,0),l!==t&&u(t)}},[l,n,u]);return Object(a.useEffect)(function(){return document.addEventListener("keyup",d),function(){return document.removeEventListener("keyup",d)}},[d]),r.a.createElement("div",{className:"kai-tabs"},r.a.Children.map(n,function(e,t){var n=Object(a.useRef)();return c[t]=n,r.a.cloneElement(e,{index:t,onTabChange:u,isActive:l===t,ref:n})}))})),V=(n(60),r.a.memo(function(e){var t=e.index,n=e.label,a=e.onTabChange,c=e.isActive,o=e.focusColor,i=e.forwardedRef,l="".concat("kai-tab").concat(c?"-active":"-inactive"),s={"--tab-underline-color":o||k.a.defaultFocusColor};return r.a.createElement("div",{onClick:function(){return a(t)},className:l,style:s,ref:i},r.a.createElement("div",{className:"".concat(l,"-label")},n))})),U=r.a.forwardRef(function(e,t){return r.a.createElement(V,Object.assign({forwardedRef:t},e))}),G=(n(61),r.a.memo(function(e){var t=e.tabLabels,n=e.onChangeIndex,c=e.focusColor,o=e.children,i=Object(a.useState)(0),l=Object(f.a)(i,2),s=l[0],u=l[1],d=Object(a.useState)(!0),h=Object(f.a)(d,2),b=h[0],m=h[1],v="".concat("kai-tab-view","-tabs"),g="".concat("kai-tab-view","-content"),p=function(e){m(!1),u(e),n&&n(e)};return r.a.createElement("div",{className:"kai-tab-view"},r.a.createElement("div",{className:v},r.a.createElement(M,{onChangeIndex:p},t.map(function(e,t){return r.a.createElement(U,{key:"key-".concat(t),label:e,focusColor:c||k.a.defaultFocusColor})}))),r.a.createElement("div",{className:g},r.a.createElement(B.a,{axis:"x",index:s,onChangeIndex:p,onTransitionEnd:function(){return m(!0)},disabled:!0},r.a.Children.map(o,function(e,t){return r.a.cloneElement(e,{isActive:s===t&&b})}))))})),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),W=(n(62),r.a.memo(function(e){var t=e.header,n=e.type,c=e.percentage,o=e.focusColor,i=e.forwardedRef,l=e.index,s=e.onFocusChange,u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(a.useState)(n),c=Object(f.a)(r,2),o=c[0],i=c[1];return Object(a.useEffect)(function(){if(e){var n=e.current,a=function(){i(!0),t&&t(!0)},r=function(){i(!1),t&&t(!1)};return n.addEventListener("focus",a),n.addEventListener("blur",r),function(){n.removeEventListener("focus",a),n.removeEventListener("blur",r)}}},[e,t]),o}(i,function(e){e&&s&&s(l||0)},!1),d="".concat("kai-pbar","-line"),h="".concat("kai-pbar","-bar-wrapper"),b="".concat("kai-pbar","-left-filler-").concat(u?"focused":"unfocused"),m="".concat("kai-pbar","-right-filler-").concat(n,"-").concat(u?"focused":"unfocused");return r.a.createElement("div",{tabIndex:0,className:"kai-pbar",style:{backgroundColor:u?o||k.a.defaultFocusColor:k.a.white},ref:i},r.a.createElement("span",{className:d},t),r.a.createElement("div",{className:h},r.a.createElement("div",{className:b,style:{width:"".concat(c,"%"),backgroundColor:u?k.a.grayscale20:o||k.a.defaultFocusColor}}),r.a.createElement("div",{className:m,style:{width:"".concat(100-c,"%")}})))})),$=r.a.forwardRef(function(e,t){return r.a.createElement(W,Object.assign({forwardedRef:t},e))});var z=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(f.a)(o,2),h=l[0],k=l[1],b=Object(d.useGoogleLogin)({clientId:q.client_id,onSuccess:function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.init();case 2:return e.t0=k,e.next=5,_.getAllTaskList();case 5:e.t1=e.sent,(0,e.t0)(e.t1),c(!0);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),isSignedIn:!0,redirectUri:J?"http://localhost:3000":"https://grachet.github.io/kaios-google-task",onFailure:function(e){console.error(e)},uxMode:"redirect",scope:"https://www.googleapis.com/auth/tasks"}),m=b.signIn,v=b.loaded;return Object(a.useEffect)(function(){!n&&v&&m()},[]),r.a.createElement(K,null,r.a.createElement(function(){var e=Object(a.useContext)(A).showToast;return r.a.createElement("div",{className:"App"},!h.length&&r.a.createElement($,{header:"Loading...",percentage:30,type:"buffer"}),r.a.createElement(y,null,r.a.createElement("div",{className:"content"},r.a.createElement(G,{tabLabels:h.map(function(e){return e.title})},h.map(function(t,n){return r.a.createElement(D,{key:n},t.tasks.map(function(n,a){return r.a.createElement(O,{key:a,primary:n.title,initCheckboxVal:"completed"===n.status,checkboxSide:"left",onInputChange:function(a){return _.updateTask(Object(i.a)({},n,{taskListId:t.id,taskId:n.id,status:a?"completed":"needsAction"})).then(function(t){console.log(t),e("GTask updated",5e3)}).catch(function(t){console.log(t),e("Fail to update GTask",5e3)})}})}))})))))},null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.2c7459d5.chunk.js.map