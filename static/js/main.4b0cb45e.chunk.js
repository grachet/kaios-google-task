(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e){e.exports={client_id:"943908581198-7al7j05rfdhqdgqireeu0bqpqlilb4ls.apps.googleusercontent.com",project_id:"kaios-task-app",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_secret:"kchV_SIsL-DanEnnb_0scDbx",redirect_uris:["https://localhost:3000","http://localhost:3000"],javascript_origins:["https://localhost:3000","http://localhost:3000"]}},2:function(e,t,a){e.exports={defaultFocusColor:"var(--color-purple)",headerPurple:"var(--header-purple-background)",headerPink:"var(--header-pink-background)",headerLime:"var(--header-lime-background)",headerCyan:"var(--header-cyan-background)",headerBlue:"var(--header-blue-background)",headerOrange:"var(--header-orange-background)",headerRed:"var(--header-red-background)",darkBlue:"var(--color-darkblue)",turquoise:"var(--color-turquoise)",darkOrange:"var(--color-darkorange)",orange:"var(--color-orange)",yellow:"var(--color-yellow)",violet:"var(--color-violet)",carrotOrange:"var(--color-carrotorange)",watTheBlue:"var(--color-wathetblue)",gold:"var(--color-gold)",purple:"var(--color-purple)",pink:"var(--color-pink)",lime:"var(--color-lime)",cyan:"var(--color-cyan)",red:"var(--color-red)",warning:"var(--color-warning)",destructive:"var(--color-destructive)",preferred:"var(--color-preferred)",black:"var(--color-gs100)",grayscale90:"var(--color-gs90)",grayscale70:"var(--color-gs70)",grayscale45:"var(--color-gs45)",grayscale20:"var(--color-gs20)",grayscale10:"var(--color-gs10)",white:"var(--color-gs00)"}},24:function(e,t,a){e.exports=a(63)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),i=a(5),l=a(3),s=a.n(l),u=a(4),f=a(1),d=a(17),h=(a(31),a(2)),k=a.n(h),b=a(8),m=a(9),v=a(21),g=a(18),p=a(22),C=(a(32),function(e){var t,a=e.handleClick,n=e.icon,c=e.text,o=e.id;return n&&(t=r.a.isValidElement(n)?n:-1===n.toString().indexOf("kai-")?r.a.createElement("img",{src:n,width:20,height:20}):r.a.createElement("span",{className:n})),r.a.createElement("button",{id:o,className:"".concat("kai-softkey","-btn"),onClick:function(e){e.preventDefault(),a&&a()},onFocus:function(e){e.preventDefault(),e.relatedTarget?e.relatedTarget.focus():e.currentTarget.blur()},"data-icon":t?"true":void 0},t,c)}),x=r.a.memo(function(e){var t=e.leftCallback,a=e.rightCallback,c=e.centerCallback,o=e.leftText,i=e.rightText,l=e.centerText,s=e.leftIcon,u=e.centerIcon,f=e.rightIcon,d=Object(n.useCallback)(function(e){switch(e.key){case"SoftLeft":t&&t();break;case"SoftRight":a&&a();break;case"Enter":c&&c()}},[t,a,c]);return Object(n.useEffect)(function(){return document.addEventListener("keydown",d),function(){return document.removeEventListener("keydown",d)}},[d]),r.a.createElement("div",{className:"".concat("kai-softkey"," visible")},r.a.createElement(C,{id:"leftSoftKey",pos:"left",text:o,icon:s,handleClick:t}),r.a.createElement(C,{id:"centerSoftKey",pos:"center",text:l,icon:u,handleClick:c}),r.a.createElement(C,{id:"rightSoftKey",pos:"right",text:i,icon:f,handleClick:a}))}),w=r.a.createContext(void 0),y=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).setLeftCallback=function(e){a.setState({leftCallback:e})},a.setRightCallback=function(e){a.setState({rightCallback:e})},a.setCenterCallback=function(e){a.setState({centerCallback:e})},a.setLeftText=function(e){a.setState({leftText:e,leftIcon:null})},a.setRightText=function(e){a.setState({rightText:e,rightIcon:null})},a.setCenterText=function(e){a.setState({centerText:e,centerIcon:null})},a.setCenterIcon=function(e){a.setState({centerIcon:e,centerText:null})},a.setLeftIcon=function(e){a.setState({leftIcon:e,leftText:null})},a.setRightIcon=function(e){a.setState({rightIcon:e,rightText:null})},a.setSoftKeyTexts=function(e){var t=e.leftText,n=void 0===t?"":t,r=e.centerText,c=void 0===r?"":r,o=e.rightText,i=void 0===o?"":o;a.setState({leftText:n,centerText:c,rightText:i})},a.setSoftKeyCallbacks=function(e){var t=e.leftCallback,n=void 0===t?function(){}:t,r=e.centerCallback,c=void 0===r?function(){}:r,o=e.rightCallback,i=void 0===o?function(){}:o;a.setState({leftCallback:n,centerCallback:c,rightCallback:i})},a.unregisterSoftKeys=function(){a.setState({leftCallback:function(){},centerCallback:function(){},rightCallback:function(){},leftText:null,rightText:null,centerText:null,centerIcon:null})},a.state={leftText:"",centerText:"",rightText:"",centerIcon:null,leftIcon:null,rightIcon:null,leftCallback:function(){},centerCallback:function(){},rightCallback:function(){}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e={setLeftCallback:this.setLeftCallback,setRightCallback:this.setRightCallback,setCenterCallback:this.setCenterCallback,setLeftText:this.setLeftText,setRightText:this.setRightText,setCenterText:this.setCenterText,setLeftIcon:this.setLeftIcon,setCenterIcon:this.setCenterIcon,setRightIcon:this.setRightIcon,setSoftKeyTexts:this.setSoftKeyTexts,setSoftKeyCallbacks:this.setSoftKeyCallbacks,unregisterSoftKeys:this.unregisterSoftKeys};return r.a.createElement(w.Provider,{value:e},this.props.children,r.a.createElement("footer",{className:this.props.className||""},r.a.createElement(x,{leftText:this.state.leftText,leftIcon:this.state.leftIcon,centerText:this.state.centerText,centerIcon:this.state.centerIcon,rightIcon:this.state.rightIcon,rightText:this.state.rightText,leftCallback:this.state.leftCallback,centerCallback:this.state.centerCallback,rightCallback:this.state.rightCallback})))}}]),t}(r.a.PureComponent),E=function(e){var t=e.children;return r.a.createElement(w.Consumer,null,function(e){return t(e)})},T=(a(33),r.a.memo(function(e){var t=e.id,a=e.primary,c=e.secondary,o=e.initCheckboxVal,i=e.onInputChange,l=e.checkboxSide,s=e.focusColor,u=e.onFocusChange,d=e.index,h=e.forwardedRef,b=e.softKeyManager,m=e.softKeyCheckedText,v=e.softKeyUncheckedText,g=e.softKeyCheckedIcon,p=e.softKeyUncheckedIcon,C=Object(n.useState)(o),x=Object(f.a)(C,2),w=x[0],y=x[1],E=Object(n.useState)(!1),T=Object(f.a)(E,2),O=T[0],j=T[1],I="".concat("kai-cbl","-box"),S="".concat("kai-cbl","-line ").concat("left"===l?"right":"left"),L="".concat("kai-cbl","-primary"),N="".concat("kai-cbl","-secondary ").concat(c?"":"hidden"),R="".concat(I,"-input-").concat(O?"focused":"unfocused");Object(n.useEffect)(function(){var e=w?m:v,t=w?g:p;O&&(null!=t?b.setCenterIcon(t):b.setCenterText(e))},[O,w,b,m,v,g,p]);var K=function(){return y(function(e){return!e})},F=Object(n.useCallback)(function(e){if(j(e),e){var t=w?m:v,a=w?g:p;null!=a?b.setCenterIcon(a):b.setCenterText(t),b.setCenterCallback(K),u(d)}},[d,u,w,m,v,g,p,b]),A=r.a.createElement("div",{className:I},r.a.createElement("input",{id:t,className:R,tabIndex:-1,type:"checkbox",checked:w,onFocus:function(e){e.preventDefault(),e.relatedTarget?e.relatedTarget.focus():e.currentTarget.blur()},onClick:function(e){y(e.target.checked),i&&i(e.target.checked)}}));return r.a.createElement("div",{tabIndex:0,className:"kai-cbl",style:{backgroundColor:O?s||k.a.defaultFocusColor:k.a.white},ref:h,onFocus:function(){return F(!0)},onBlur:function(){return F(!1)}},"left"===l||void 0===l?A:null,r.a.createElement("div",{className:S},r.a.createElement("span",{className:L},a),r.a.createElement("label",{className:N},c)),"right"===l?A:null)})),O=r.a.forwardRef(function(e,t){return r.a.createElement(E,null,function(a){return r.a.createElement(T,Object.assign({softKeyManager:a,forwardedRef:t},e))})}),j=a(10),I=a.n(j),S=(a(34),function(e){var t=e.text,a=e.isDisplayed,n=I()("kai-toast",a&&"".concat("kai-toast","--displayed"));return r.a.createElement("h1",{className:n},t)}),L=!1,N=[],R=r.a.createContext(void 0),K=function(e){var t=e.children,a=Object(n.useState)(""),c=Object(f.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(!1),s=Object(f.a)(l,2),u=s[0],d=s[1];return r.a.createElement(R.Provider,{value:{showToast:function(e,t){N.push({text:e,duration:t}),!L&&function e(){if(0!==N.length){L=!0;var t=N.shift();t&&(i(t.text),d(!0),setTimeout(function(){d(!1),setTimeout(function(){e()},300)},t.duration||5e3))}else L=!1}()}}},r.a.createElement(S,{text:o,isDisplayed:u}),t)},F=R,A=a(23),_=new(function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,[{key:"init",value:function(){return new Promise(function(e,t){return window.gapi.client.load("tasks","v1",function(){return window.gapi.client.load("plus","v1",function(){return e()})})})}},{key:"getAllTaskList",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t,a=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listTaskLists();case 2:return t=e.sent,e.next=5,Promise.all(t.items.map(function(){var e=Object(u.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.listTasks(t.id);case 2:return n=e.sent,e.abrupt("return",Object(i.a)({},t,{tasks:Array.isArray(n&&n.items)?n.items:[]}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listTaskLists",value:function(){var e=window.gapi.client.tasks.tasklists.list();return this.makeRequest(e)}},{key:"showTaskList",value:function(e){var t=window.gapi.client.tasks.tasklists.get({tasklist:e});return this.makeRequest(t)}},{key:"listTasks",value:function(e){var t=window.gapi.client.tasks.tasks.list({tasklist:e});return this.makeRequest(t)}},{key:"makeRequest",value:function(e){return new Promise(function(t,a){e.execute(function(e){return e.error?a(e.error):t(e.result)})})}},{key:"updateTask",value:function(e){var t=e.taskListId,a=e.taskId,n=Object(A.a)(e,["taskListId","taskId"]),r=window.gapi.client.tasks.tasks.update(Object(i.a)({tasklist:t,task:a,id:a},n));return this.makeRequest(r)}}]),e}()),q=a(19),D=(a(35),r.a.memo(function(e){var t=[],a=Object(n.useState)(0),c=Object(f.a)(a,2),i=c[0],l=c[1],s=e.children,u=e.onChangeIndex,d=e.isActive,h=e.className,k=function(e){l(e),u&&u(e)},b=Object(n.useCallback)(function(e){if(t[e]){var a=o.a.findDOMNode(t[e].current);a&&a.focus()}},[t]),m=Object(n.useCallback)(function(e){var a=i;if(d)switch(e.key){case"ArrowUp":b(a=a-1>=0?a-1:a);break;case"ArrowDown":a=a+1<t.length?a+1:a,b(a)}},[d,i,b,t]);Object(n.useEffect)(function(){return document.addEventListener("keydown",m),function(){return document.removeEventListener("keydown",m)}},[m]),Object(n.useEffect)(function(){d&&b(i)},[d,b,i]);return r.a.createElement("div",{className:I()("kai-list-view",h||"")},function(){var e=-1;return r.a.Children.map(s,function(a){if(!a||null!=a.props.separatorText)return a;e++;var n=r.a.createRef();return t[e]=n,r.a.cloneElement(a,{index:e,onFocusChange:k,ref:n})})}())})),P=a(20),B=a.n(P),M=(a(59),r.a.memo(function(e){var t=e.onChangeIndex,a=e.children,c=[],o=Object(n.useState)(0),i=Object(f.a)(o,2),l=i[0],s=i[1],u=Object(n.useCallback)(function(e){s(e),c[e].current.scrollIntoView({behavior:"auto",block:"start",inline:"center"}),t(e)},[c,t]),d=Object(n.useCallback)(function(e){var t=l;switch(e.key){case"ArrowRight":t=Math.min(t+1,r.a.Children.count(a)-1),l!==t&&u(t);break;case"ArrowLeft":t=Math.max(t-1,0),l!==t&&u(t)}},[l,a,u]);return Object(n.useEffect)(function(){return document.addEventListener("keyup",d),function(){return document.removeEventListener("keyup",d)}},[d]),r.a.createElement("div",{className:"kai-tabs"},r.a.Children.map(a,function(e,t){var a=Object(n.useRef)();return c[t]=a,r.a.cloneElement(e,{index:t,onTabChange:u,isActive:l===t,ref:a})}))})),V=(a(60),r.a.memo(function(e){var t=e.index,a=e.label,n=e.onTabChange,c=e.isActive,o=e.focusColor,i=e.forwardedRef,l="".concat("kai-tab").concat(c?"-active":"-inactive"),s={"--tab-underline-color":o||k.a.defaultFocusColor};return r.a.createElement("div",{onClick:function(){return n(t)},className:l,style:s,ref:i},r.a.createElement("div",{className:"".concat(l,"-label")},a))})),G=r.a.forwardRef(function(e,t){return r.a.createElement(V,Object.assign({forwardedRef:t},e))}),U=(a(61),r.a.memo(function(e){var t=e.tabLabels,a=e.onChangeIndex,c=e.focusColor,o=e.children,i=Object(n.useState)(0),l=Object(f.a)(i,2),s=l[0],u=l[1],d=Object(n.useState)(!0),h=Object(f.a)(d,2),b=h[0],m=h[1],v="".concat("kai-tab-view","-tabs"),g="".concat("kai-tab-view","-content"),p=function(e){m(!1),u(e),a&&a(e)};return r.a.createElement("div",{className:"kai-tab-view"},r.a.createElement("div",{className:v},r.a.createElement(M,{onChangeIndex:p},t.map(function(e,t){return r.a.createElement(G,{key:"key-".concat(t),label:e,focusColor:c||k.a.defaultFocusColor})}))),r.a.createElement("div",{className:g},r.a.createElement(B.a,{axis:"x",index:s,onChangeIndex:p,onTransitionEnd:function(){return m(!0)},disabled:!0},r.a.Children.map(o,function(e,t){return r.a.cloneElement(e,{isActive:s===t&&b})}))))})),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),W=(a(62),r.a.memo(function(e){var t=e.header,a=e.type,c=e.percentage,o=e.focusColor,i=e.forwardedRef,l=e.index,s=e.onFocusChange,u=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(n.useState)(a),c=Object(f.a)(r,2),o=c[0],i=c[1];return Object(n.useEffect)(function(){if(e){var a=e.current,n=function(){i(!0),t&&t(!0)},r=function(){i(!1),t&&t(!1)};return a.addEventListener("focus",n),a.addEventListener("blur",r),function(){a.removeEventListener("focus",n),a.removeEventListener("blur",r)}}},[e,t]),o}(i,function(e){e&&s&&s(l||0)},!1),d="".concat("kai-pbar","-line"),h="".concat("kai-pbar","-bar-wrapper"),b="".concat("kai-pbar","-left-filler-").concat(u?"focused":"unfocused"),m="".concat("kai-pbar","-right-filler-").concat(a,"-").concat(u?"focused":"unfocused");return r.a.createElement("div",{tabIndex:0,className:"kai-pbar",style:{backgroundColor:u?o||k.a.defaultFocusColor:k.a.white},ref:i},r.a.createElement("span",{className:d},t),r.a.createElement("div",{className:h},r.a.createElement("div",{className:b,style:{width:"".concat(c,"%"),backgroundColor:u?k.a.grayscale20:o||k.a.defaultFocusColor}}),r.a.createElement("div",{className:m,style:{width:"".concat(100-c,"%")}})))})),$=r.a.forwardRef(function(e,t){return r.a.createElement(W,Object.assign({forwardedRef:t},e))});var z=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(f.a)(o,2),h=l[0],k=l[1],b=Object(d.useGoogleLogin)({clientId:q.client_id,onSuccess:function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.init();case 2:return e.t0=k,e.next=5,_.getAllTaskList();case 5:e.t1=e.sent,(0,e.t0)(e.t1),c(!0);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),isSignedIn:!0,redirectUri:J?"http://localhost:3000":"https://grachet.github.io/kaios-google-task",onFailure:function(e){console.error(e)},uxMode:"redirect",scope:"https://www.googleapis.com/auth/tasks"}),m=b.signIn,v=b.loaded;return Object(n.useEffect)(function(){!a&&v&&m()},[]),r.a.createElement(K,null,r.a.createElement(function(){var e=Object(n.useContext)(F).showToast;return r.a.createElement("div",{className:"App"},!h.length&&r.a.createElement($,{header:"Fetching tasks...",percentage:30,type:"buffer"}),r.a.createElement(y,null,r.a.createElement("div",{className:"content"},r.a.createElement(U,{tabLabels:h.map(function(e){return e.title})},h.map(function(t,a){return r.a.createElement(D,{key:a},t.tasks.map(function(a,n){return r.a.createElement(O,{key:n,primary:a.title,initCheckboxVal:"completed"===a.status,checkboxSide:"left",onInputChange:function(n){e("GTask start",1e3),_.updateTask(Object(i.a)({},a,{taskListId:t.id,taskId:a.id,status:n?"completed":"needsAction"})).then(function(t){console.log(t),e("GTask updated",1e3)}).catch(function(t){console.log(t),e("Fail to update GTask",1e3)})}})}))})))))},null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.4b0cb45e.chunk.js.map